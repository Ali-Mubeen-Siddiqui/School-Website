
{% extends 'base.html' %}

{% load static %}
{% block title %}Home{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'pages_static/style1.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<style>
/* --- Improved Carousel Layout/Responsiveness --- */
/* --- Ensures proper vertical stacking and spacing, no overlap, nice mobile --- */

.desk-carousel.cardm {
  max-width: 1200px;
  width: 100%;
  margin: 48px auto 38px auto;
  background: rgba(27, 28, 38, 0.92);
  border-radius: 25px;
  box-shadow: 0 14px 32px 2px rgba(19,27,44,0.19), 0 2px 12px rgba(53,106,255,0.08);
  display: flex;
  flex-direction: column;
  align-items: stretch;
  min-height: 330px;
  padding: 0;
  position: relative;
  backdrop-filter: blur(18px) saturate(132%);
  -webkit-backdrop-filter: blur(18px) saturate(132%);
  border: 1.5px solid rgba(80, 110, 190, 0.15);
  overflow: hidden;
}

.desk-carousel-inner {
  width: 100%;
  height: 100%;
  min-height: 330px;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
}

.desk-carousel-slide {
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 100%;
  height: 100%;
  min-height: 330px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 0; left: 0;
  max-width: 100%;
  padding: 38px 38px 38px 38px;
  box-sizing: border-box;
  transition: opacity 0.43s cubic-bezier(.4,0,.2,1), transform 0.46s cubic-bezier(.4,0,.2,1);
  z-index: 1;
  background: none;
  gap: 34px;
}

.desk-carousel-slide.active {
  opacity: 1;
  pointer-events: auto;
  position: relative;
  z-index: 2;
  transform: scale(1.01);
}

.desk-desk-img {
  flex: 0 0 160px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 160px;
  width: 160px;
  height: 160px;
  margin-right: 0;
  margin-bottom: 0;
  box-shadow: 0 8px 32px rgba(0,0,0,0.13);
  background: rgba(37,38,51,0.20);
  border-radius: 50%;
  backdrop-filter: blur(7px) saturate(120%);
  -webkit-backdrop-filter: blur(7px) saturate(120%);
  position: relative;
  z-index: 2;
}

.desk-desk-img img {
  width: 128px;
  height: 128px;
  object-fit: cover;
  border-radius: 50%;
  border: 3px solid #4972c7;
  background: #14151e;
  box-shadow: 0 4px 15px rgba(63,79,160,0.14);
  display: block;
}

.desk-carousel-info {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  min-width: 0;
  background: none;
  padding-left: 0px;
  position: relative;
  z-index: 3;
  /* Prevent overlap */
  max-width: 750px;
}

.desk-carousel-info h2 {
  margin: 0 0 14px 0;
  color: #60daf9;
  font-size: 1.42em;
  letter-spacing: .04em;
  font-weight: 800;
  text-shadow: 0 3px 10px rgba(23,33,44,0.11);
  line-height: 1.2;
}

.desk-carousel-info blockquote {
  color: #e3ece6;
  font-size: 1.16em;
  margin: 0 0 10px 0;
  border-left: 4px solid #4972c7;
  padding-left: 1.15em;
  font-style: italic;
  background: none;
  text-shadow: 0 2px 12px rgba(30,32,44,0.08);
  line-height: 1.45;
}

.desk-carousel-info .desk-author {
  color: #b3caea;
  font-size: 1.06em;
  margin: 10px 0 0 0;
  font-weight: 600;
  font-style: normal;
}

.desk-carousel-info .section-button {
  margin-top: 30px;
  margin-bottom: 0;
  text-align: left;
  width: fit-content;
  z-index: 2;
  /* Ensure no overlap with image */
}

/* Button styling remains unchanged */

/* --- Carousel indicators --- */
.desk-carousel-indicators {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  margin: 26px 0 14px 0;
  position: absolute;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 12;
  pointer-events: auto;
}
.desk-indicator {
  display: inline-block;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  background-color: #406ffd;
  opacity: 0.27;
  cursor: pointer;
  transition: opacity 0.18s, transform 0.22s;
  border: 2px solid #4972c7;
  box-shadow: 0 2px 11px rgba(64,111,253,0.09);
}
.desk-indicator.active {
  opacity: 1;
  background-color: #60daf9;
  transform: scale(1.15);
}

/* Responsive Adjustments */
@media (max-width: 992px) {
  .desk-carousel.cardm, .desk-carousel-inner, .desk-carousel-slide {
    min-height: 220px;
  }
  .desk-desk-img, .desk-desk-img img {
    min-width: 94px; width: 94px; height: 94px;
    max-width: 94px; max-height: 94px;
  }
  .desk-carousel-slide {
    gap: 20px;
    padding: 18px 10px 18px 10px;
  }
  .desk-carousel-indicators {
    margin-bottom: 5px;
  }
}

@media (max-width: 770px) {
  .desk-carousel.cardm { min-height: 0; }
  .desk-carousel-slide, .desk-carousel-slide.active {
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: unset;
    padding: 18px 3vw 20px 3vw;
    gap: 0;
  }
  .desk-desk-img {
    margin: 0 0 18px 0;
    flex: none;
    min-width: 84px;
    width: 84px;
    height: 84px;
    max-width: 84px;
    max-height: 84px;
  }
  .desk-desk-img img {
    width: 66px;
    height: 66px;
    min-width: 66px;
    min-height: 66px;
    max-width: 66px;
    max-height: 66px;
  }
  .desk-carousel-info {
    padding-left: 0;
    max-width: 100%;
    width: 100%;
    align-items: center;
    text-align: center;
    margin: 0 !important;
  }
  .desk-carousel-info h2,
  .desk-carousel-info .desk-author,
  .desk-carousel-info blockquote {
    text-align: center;
    margin-left: auto;
    margin-right: auto;
  }
  .desk-carousel-info .section-button {
    margin-top: 16px;
    margin-bottom: 0;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .desk-carousel-info .btn-primary {
    padding: 0.89rem 1.4rem;
    font-size: 0.969rem;
    width: auto;
    min-width: 155px;
    margin: 0 auto;
  }
  .desk-carousel-indicators {
    position: static;
    margin-bottom: 6px;
    margin-top: 10px;
  }
}

@media (max-width: 510px) {
  .desk-carousel.cardm { padding: 0; }
  .desk-carousel-inner, .desk-carousel-slide, .desk-carousel-slide.active {
    min-height: 0 !important;
    padding: 6vw 2vw 24px 2vw;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    gap: 0;
  }
  .desk-desk-img {
    margin-bottom: 13px;
    min-width: 60px;
    max-width: 60px;
    width: 60px;
    height: 60px;
    max-height: 60px;
  }
  .desk-desk-img img {
    width: 44px;
    height: 44px;
    max-width: 44px;
    max-height: 44px;
  }
  .desk-carousel-info {
    padding: 0;
    max-width: 100vw;
    align-items: center;
    text-align: center;
  }
  .desk-carousel-info h2,
  .desk-carousel-info .desk-author,
  .desk-carousel-info blockquote {
    text-align: center;
    margin-left: auto; margin-right: auto;
    width: 99vw;
    max-width: 340px;
  }
  .desk-carousel-info .section-button {
    margin-top: 13px;
    width: 100%;
    justify-content: center;
    align-items: center;
    display: flex;
  }
  .desk-carousel-info .btn-primary {
    font-size: 0.927rem;
    padding: 0.72rem 1.1rem;
    width: auto;
    min-width: 130px;
  }
  .desk-carousel-indicators {
    position: static;
    margin-bottom: 7px;
    margin-top: 12px;
  }
}

/* Prevent overlap in all situations */
.desk-carousel-slide, .desk-desk-img, .desk-carousel-info, .desk-carousel-info * {
  box-sizing: border-box;
  overflow: visible;
  word-break: break-word;
}

</style>
{% endblock %}

{% block content %}

<section class="hero">
  <h2 class="gta-pricedown" style="text-decoration: underline; margin-bottom:0;">The Light of Christ Shines To All</h2>
</section>

<section class="container cont cardm" style="flex-wrap: wrap-reverse;">
  <div class="about-text">
    <h2 class="heal2">Christ Church College</h2>
    <p>
      Christ Church College is a vibrant and inclusive community of learners, dedicated to providing a world-class education that prepares students for success in an ever-changing world. Our rigorous academic programs, combined with a rich array of extracurricular activities, foster a well-rounded education that cultivates intellectual curiosity, creativity, and critical thinking. With a strong emphasis on character development and spiritual growth, we strive to inspire our students to become compassionate, responsible, and engaged global citizens. Our state-of-the-art facilities, experienced faculty, and supportive staff create a nurturing environment that encourages students to explore their full potential, pursue their passions, and achieve their dreams.
    </p>
  </div>
  <div class="about-image">
    <img src="{% static 'school1.jpg' %}" alt="Christ Church College" class="mymg" />
  </div>
</section>

<section class="container cont cardm">
  <div class="about-text">
    <h2 class="heal2">Our Distinguished Faculty</h2>
    <p>
      Our faculty comprises experienced educators, researchers, and industry professionals who are passionate about nurturing young minds. With diverse backgrounds and expertise across various disciplines, they create an engaging learning environment that challenges students to think critically and innovate. Our teachers are not just educators but mentors who guide students on their academic journey.
    </p>
    <div class="section-button">
      <a href="{% url 'faculty' %}" class="btn-primary">Meet Our Faculty</a>
    </div>
  </div>
</section>

<section class="container cont cardm">
  <div class="about-text">
    <h2 class="heal2">Campus Life & Activities</h2>
    <p>
      Beyond academics, our campus offers a vibrant community life with numerous clubs, sports teams, cultural events, and leadership opportunities. Students can participate in various extracurricular activities that help develop teamwork, leadership skills, and personal growth. Our campus facilities support both learning and recreation.
    </p>
    <div class="section-button">
      <a href="{% url 'campus' %}" class="btn-primary">Discover Campus Life</a>
    </div>
  </div>
  <div class="about-image">
    <img src="{% static 'pages_static/life.jpg' %}" alt="Campus Life" loading="lazy" class="mymg" />
  </div>
</section>

<section class="container cont cardm">
  <div class="about-text">
    <h2 class="heal2">Academic Excellence</h2>
    <p>
      We offer a comprehensive range of academic programs designed to meet the evolving needs of today's students. From traditional disciplines to cutting-edge courses, our curriculum is constantly updated to reflect current industry standards and prepare students for future challenges. Our programs emphasize both theoretical knowledge and practical application.
    </p>
    <div class="section-button">
      <a href="{% url 'programs' %}" class="btn-primary">Explore Programs</a>
    </div>
  </div>
</section>

<section class="container cont cardm">
  <div class="about-image">
    <img src="{% static 'pages_static/front.webp' %}" alt="Gallery" loading="lazy" class="mymg" />
  </div>
  <div class="about-text">
    <h2 class="heal2">Photo Gallery</h2>
    <p>
      Explore our visual journey through moments that capture the spirit of Christ Church College. From academic achievements to cultural celebrations, sports events to community service, our gallery showcases the diverse and dynamic life of our institution. Each image tells a story of growth, learning, and community.
    </p>
    <div class="section-button">
      <a href="{% url 'gallery' %}" class="btn-primary">View Gallery</a>
    </div>
  </div>
</section>

<!-- Carousel for Principal, Manager, and Captain Desk (Nav buttons removed, 5s per slide, only indicators at bottom) -->
<section class="desk-carousel cardm cont" style="box-sizing: border-box;">
  <div class="desk-carousel-inner">
    <div class="desk-carousel-slide active" data-desk-slide="0">
      <div class="desk-desk-img">
        <img src="{% static 'pages_static/principal.jpg' %}" alt="Principal Photo" loading="lazy">
      </div>
      <div class="desk-carousel-info">
        <h2>From the Principal's Desk</h2>
        <blockquote>
          "At Christ Church College, we believe in nurturing not just minds, but character and spirit. Our aim is to foster an environment where every student feels inspired to reach for excellence and develop as a well-rounded individual. Let us continue our pursuit of knowledge, faith, and service together."
        </blockquote>
        <p class="desk-author">— Mr. E.A. Chattree, Principal</p>
      </div>
    </div>
    <div class="desk-carousel-slide" data-desk-slide="1">
      <div class="desk-desk-img">
        <img src="{% static 'pages_static/manager.jpg' %}" alt="Manager Photo" loading="lazy">
      </div>
      <div class="desk-carousel-info">
        <h2>From the Manager's Desk</h2>
        <blockquote>
          "The success of our college rests on the dedication of our staff, the enthusiasm of our students, and the support of our community. We remain committed to providing the best educational experience, continually adapting and growing with the times."
        </blockquote>
        <p class="desk-author">— Mr R.K. Chattree, Manager</p>
      </div>
    </div>
    <div class="desk-carousel-slide" data-desk-slide="2">
      <div class="desk-desk-img">
        <img src="{% static 'pages_static/college_captain.jpg' %}" alt="College Captain" loading="lazy">
      </div>
      <div class="desk-carousel-info">
        <h2>A Few Words from the College Captain</h2>
        <blockquote>
          "It is my honor to represent such a vibrant and determined student body. Christ Church College is not just a place of learning, but a nurturing ground for leadership and growth. Together, let's strive for excellence."
        </blockquote>
        <p class="desk-author">— Prajju Bhaiyya, 2024</p>
      </div>
    </div>
  </div>
  <!-- NAV BUTTONS REMOVED! -->
  <div class="desk-carousel-indicators" id="deskCarouselIndicators">
    <span class="desk-indicator active"></span>
    <span class="desk-indicator"></span>
    <span class="desk-indicator"></span>
  </div>
</section>

<section class="container cont cardm">
  <div class="about-text">
    <h2 class="heal2">Get In Touch</h2>
    <p>
      We welcome inquiries from prospective students, parents, and community members. Our dedicated staff is here to answer your questions about admissions, programs, campus life, and more. Reach out to us to learn how Christ Church College can be part of your educational journey.
    </p>
    <div class="section-button">
      <a href="{% url 'contact' %}" class="btn-primary">Contact Us</a>
    </div>
  </div>
</section>

{% block extra_script %}
<script>
(function () {
  // Section animation
  if (!window.__contObserverInitialized) {
    window.__contObserverInitialized = true;
    const observerOptions = { threshold: 0.1, rootMargin: '0px' };
    const observer = new IntersectionObserver((entries) => {
      requestAnimationFrame(() => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) entry.target.classList.add('animate');
          else entry.target.classList.remove('animate');
        });
      });
    }, observerOptions);

    const initObserver = () => {
      document.querySelectorAll('.cont').forEach((element) => {
        observer.observe(element);
      });
    };
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', initObserver, { once: true });
    } else if(window.requestIdleCallback) {
      requestIdleCallback(initObserver, { timeout: 2000 });
    } else {
      setTimeout(initObserver, 0);
    }
  }

  // Desk Carousel (no arrow buttons, indicators dot navigation only, 5s slide time)
  const slides = Array.from(document.querySelectorAll('.desk-carousel-slide'));
  const indicators = Array.from(document.querySelectorAll('.desk-indicator'));
  let current = 0, timer = null;

  function show(idx) {
    slides.forEach((s, i) => {
      s.classList.toggle('active', i === idx);
      if(i === idx) { s.style.position='relative'; s.style.zIndex=2; }
      else { s.style.position='absolute'; s.style.zIndex=1; }
    });
    indicators.forEach((d, i) => {
      d.classList.toggle('active', i === idx);
    });
    current = idx;
  }
  function next() {
    show((current + 1) % slides.length);
    restartAuto();
  }
  function goto(idx) {
    show(idx);
    restartAuto();
  }
  indicators.forEach((el, i) => {
    el.addEventListener('click', () => goto(i));
  });

  function auto() { next(); timer = setTimeout(auto, 5000); }
  function restartAuto() { if(timer) clearTimeout(timer); timer = setTimeout(auto, 5000); }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => { show(0); timer = setTimeout(auto, 5000); }, {once:true});
  } else {
    show(0); timer = setTimeout(auto, 5000);
  }
})();
</script>
{% endblock %}

{% endblock %}
